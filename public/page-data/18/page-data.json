{"componentChunkName":"component---src-templates-post-jsx","path":"/18/","result":{"data":{"site":{"siteMetadata":{"title":"CATCH NPE"}},"markdownRemark":{"id":"9c3f7bc5-90c4-5e47-9f48-10bca7854de7","excerpt":"상호배제(Mutual Exclusion) 상호배제(Mutual Exclusion)는 여러 프로세스나 스레드가 동시에 같은 공유 자원에 접근하는 것을 막는 메커니즘입니다. 일상생활에서 비유하면, 화장실 사용과 같습니다.\n한 번에 한 사람만 화장실을 사용할 수 있고, 다른 사람들은 기다려야 합니다.\n컴퓨터 시스템에서도 마찬가지로 특정 자원은 한 번에 하나의 …","html":"<h2 id=\"상호배제Mutual-Exclusion\" style=\"position:relative;\"><a href=\"#%EC%83%81%ED%98%B8%EB%B0%B0%EC%A0%9CMutual-Exclusion\" aria-label=\"상호배제Mutual Exclusion permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>상호배제(Mutual Exclusion)</h2>\n<hr>\n<p>상호배제(Mutual Exclusion)는 여러 프로세스나 스레드가 동시에 같은 공유 자원에 접근하는 것을 막는 메커니즘입니다.</p>\n<p>일상생활에서 비유하면, 화장실 사용과 같습니다.\n한 번에 한 사람만 화장실을 사용할 수 있고, 다른 사람들은 기다려야 합니다.\n컴퓨터 시스템에서도 마찬가지로 특정 자원은 한 번에 하나의 프로세스만 사용할 수 있어야 합니다.</p>\n<br>\n<h2 id=\"왜-상호배제가-필요할까\" style=\"position:relative;\"><a href=\"#%EC%99%9C-%EC%83%81%ED%98%B8%EB%B0%B0%EC%A0%9C%EA%B0%80-%ED%95%84%EC%9A%94%ED%95%A0%EA%B9%8C\" aria-label=\"왜 상호배제가 필요할까 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>왜 상호배제가 필요할까?</h2>\n<p>현대 운영체제는 멀티태스킹 환경에서 여러 프로세스가 동시에 실행됩니다.\n이때 프로세스들이 공유하는 자원(메모리, 파일, 데이터베이스 등)에 동시에 접근하면 다음과 같은 문제가 발생할 수 있습니다.</p>\n<h3 id=\"1경쟁-상황Race-Condition\" style=\"position:relative;\"><a href=\"#1%EA%B2%BD%EC%9F%81-%EC%83%81%ED%99%A9Race-Condition\" aria-label=\"1경쟁 상황Race Condition permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>1.경쟁 상황(Race Condition)</h3>\n<p>두 프로세스가 동시에 같은 데이터를 수정하려 할 때, 실행 순서에 따라 결과가 달라지는 상황입니다.\n예를 들어, 은행 계좌 잔액을 동시에 업데이트하는 두 거래가 있다면, 최종 잔액이 예상과 다를 수 있습니다.</p>\n<h3 id=\"2-데이터-일관성-파괴\" style=\"position:relative;\"><a href=\"#2-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%9D%BC%EA%B4%80%EC%84%B1-%ED%8C%8C%EA%B4%B4\" aria-label=\"2 데이터 일관성 파괴 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>2. 데이터 일관성 파괴</h3>\n<p>여러 프로세스가 동시에 데이터를 수정하면 데이터의 무결성이 깨질 수 있습니다. 이는 시스템 전체의 신뢰성에 큰 영향을 미칩니다.</p>\n<br>\n<br>\n<h2 id=\"동기화-기법\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0%ED%99%94-%EA%B8%B0%EB%B2%95\" aria-label=\"동기화 기법 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>동기화 기법</h2>\n<hr>\n<p>이런 <strong>상호 배제</strong>에 대해 방지하는 방법으로는 <strong>뮤텍스</strong>, <strong>세마포어</strong>, <strong>모니터</strong> 기법이 있습니다.</p>\n<br>\n<br>\n<h2 id=\"뮤텍스-락Mutex-lock\" style=\"position:relative;\"><a href=\"#%EB%AE%A4%ED%85%8D%EC%8A%A4-%EB%9D%BDMutex-lock\" aria-label=\"뮤텍스 락Mutex lock permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>뮤텍스 락(Mutex lock)</h2>\n<hr>\n<p><strong>뮤텍스 락</strong>의 풀네임은 <strong>Mutual Exclusion Lock</strong>입니다. 즉 상호 배제 단어에 lock을 붙인 단어와 일치합니다.</p>\n<p>이 말은 상호배제를 구현하기 위해 <strong>Locking</strong>방식을 사용하는 방법입니다.</p>\n<p><strong>뮤텍스 락</strong>은 화장실 사용에 비유해보겠습니다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; '>\n      <a class='gatsby-resp-image-link' href='/static/f9f8af880e42af0dc1c2a6a94c2ddad0/a8a0d/toilet.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 149.41176470588235%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img.png' title='' src='/static/f9f8af880e42af0dc1c2a6a94c2ddad0/a8a0d/toilet.png' srcset='/static/f9f8af880e42af0dc1c2a6a94c2ddad0/e7570/toilet.png 170w,\n/static/f9f8af880e42af0dc1c2a6a94c2ddad0/a8a0d/toilet.png 300w' sizes='(max-width: 300px) 100vw, 300px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>img.png</figcaption>\n  </figure></p>\n<br>\n<p>화장실은 한칸에 한사람만 받을 수 있습니다. 칸에 사람이 들어가있다면 해당 칸에 다른 사람이 들어올 수 없습니다.\n다른 사람이 들어오는 시점은 먼저 사용하던 사람이 해당 칸을 나가게 되면 사용할 수 있습니다.</p>\n<p>이 내용을 설명하는 이유는, 위 방식의 흐름이 뮤텍스 락과 동일하기 때문입니다.</p>\n<p>간단한 <strong>뮤텍스락</strong>을 코드를 통해서 보겠습니다.</p>\n<p><strong>자물쇠</strong>에 해당하는 전역변수 하나, 그리고 해당 <strong>자물쇠</strong>를 잠구고, 푸는 두가지 함수만 있으면 구현가능합니다.</p>\n<br>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token function\">acquire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>lock <span class=\"token operator\">==</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n        <span class=\"token punctuation\">}</span>\n    \n    lock <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token function\">release</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    lock <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<p>해당 함수들은 차례대로 화장실 문이 잠겼는지 확인하고 잠기지 않았다면 들어가서 잠구는 함수 <strong>Acquire</strong>,\n그리고 화장실을 나올때 잠금을 해제 하는 <strong>Release</strong>로 볼 수 있습니다.</p>\n<p>이 함수를 아래 수도코드 처럼, 임계 구역 들어가기전, 나온 후 에 사용하게 되면</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token function\">acquire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 임계 구역</span>\n<span class=\"token function\">release</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><strong>lock</strong>여부를 확인 한 후, 들어가도 되면 본인이 <strong>lock</strong>을 걸고 이미 <strong>lock</strong>이 걸려있다면\n임계 구역 코드 전에서 계속 기다리게 됩니다.</p>\n<br>\n<h3 id=\"뮤텍스-락의-단점\" style=\"position:relative;\"><a href=\"#%EB%AE%A4%ED%85%8D%EC%8A%A4-%EB%9D%BD%EC%9D%98-%EB%8B%A8%EC%A0%90\" aria-label=\"뮤텍스 락의 단점 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>뮤텍스 락의 단점</h3>\n<p>하지만, 이런 방식에는 큰 문제가 있는데 <strong>바쁜대기(Busy Wait)</strong> 을 수행하게 됩니다.\n명칭 그대로 대기를 하는 상황임에도 바쁘게 행동하는 것을 말하게 됩니다.</p>\n<p><strong>대기</strong>를 하는 상황에 행동을 하는것은 <strong>lock 확인</strong>작업에 <strong>CPU</strong>를 사용하겠다는 것을 의미하고,\n이런 기다림은 해당 <strong>lock</strong> 이 풀릴떄까지 지속됩니다. 즉, 비효율적입니다.</p>\n<br>\n<br>\n<h2 id=\"세마포semaphore\" style=\"position:relative;\"><a href=\"#%EC%84%B8%EB%A7%88%ED%8F%ACsemaphore\" aria-label=\"세마포semaphore permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>세마포(semaphore)</h2>\n<hr>\n<p><strong>세마포</strong>는 동기화 방식중 하나입니다. <strong>뮤텍스 락</strong>과 비교하면 공유자원의 갯수를 다루는 방식이 다릅니다.\n<strong>뮤텍스 락</strong>은 공유자원이 하나라고 가정하고 라킹을 수행하지만, <strong>세마포</strong>는 공유 자원이 여러 개 있을경우\n각 프로세스는 해당 공유자원에 접근이 가능합니다.</p>\n<p>마치 공중화장실에서 화장신 칸 수 만큼 공유자원이 있고, 각 칸에 사람이 들어가는 것을 관리하는 방식입니다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; '>\n      <a class='gatsby-resp-image-link' href='/static/0207ef441e61d6de31d0ce6e37b1a2c4/ed72c/semaphore.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 133.52941176470588%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img.png' title='' src='/static/0207ef441e61d6de31d0ce6e37b1a2c4/ca1dc/semaphore.png' srcset='/static/0207ef441e61d6de31d0ce6e37b1a2c4/e7570/semaphore.png 170w,\n/static/0207ef441e61d6de31d0ce6e37b1a2c4/f46e7/semaphore.png 340w,\n/static/0207ef441e61d6de31d0ce6e37b1a2c4/ca1dc/semaphore.png 680w,\n/static/0207ef441e61d6de31d0ce6e37b1a2c4/02d09/semaphore.png 1020w,\n/static/0207ef441e61d6de31d0ce6e37b1a2c4/9d567/semaphore.png 1360w,\n/static/0207ef441e61d6de31d0ce6e37b1a2c4/ed72c/semaphore.png 1944w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>img.png</figcaption>\n  </figure></p>\n<p><strong>세마포</strong>는 사진과 같은 <strong>철도 신호기</strong>에서 유래한 단어 입니다. 그렇기 때문에 철도 신호와 같은 방식을 사용합니다.</p>\n<p><strong>뮤텍스 락</strong>은 공유 자원을 <strong>잠금</strong>, <strong>해제</strong>를 수행하면서 해당 자원을 관리하지만,</p>\n<p><strong>세마포</strong>의 경우 <strong>빨간불</strong>, <strong>초록불</strong> 처럼 가도 되는지, 멈춰야 하는지 상태를 알려줍니다.</p>\n<p><strong>세마포</strong>도 간단하게 코드로 구현이 가능합니다.</p>\n<p>먼저 <strong>공유자원의 갯수</strong>를 나타내는 전역 변수 한개와, 임계구역에 들어가도 되는지, 기다려야 할지 알려주는 함수 <strong>Wait</strong>,\n그리고 기다리고 있는 프로세스에게 <strong>이제 출발하라</strong>를 나타내는 <strong>Signal</strong>함수가 있습니다.</p>\n<br>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token function\">wait</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">S</span> <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        \n        <span class=\"token punctuation\">}</span>\n    <span class=\"token class-name\">S</span><span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token function\">signal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">S</span><span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드를 차례대로 <strong>Wait</strong>, <strong>Signal</strong>함수를 구현한것이고 전역 변수 S의 값이 양수, 즉 사용해도 되는\n공유자원이 있을 경우 <strong>Wait</strong>함수의 while문을 탈출합니다.</p>\n<p>그 경우 사용가능한 공유 자원 갯수를 하나 줄입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token function\">wait</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// 임계 구역</span>\n<span class=\"token function\">signal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>임계 구역을 나오게 되면 signal이 수행될것이고, 사용가능한 자원을 하나 반납하게 될것입니다.</p>\n<br>\n<p>근데 while문이 있다면 <strong>뮤텍스락</strong>처럼  <strong>바쁜 대기</strong> 상태가 발생할 수 있다는걸 암시하게 됩니다.\n하지만 이는 세마포가 <strong>CPU</strong>를 사용하지 않게 구현하며 해결할 수 있습니다.</p>\n<br>\n<h2 id=\"세마포가-busy-wait를-해결하는-방법\" style=\"position:relative;\"><a href=\"#%EC%84%B8%EB%A7%88%ED%8F%AC%EA%B0%80-busy-wait%EB%A5%BC-%ED%95%B4%EA%B2%B0%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"세마포가 busy wait를 해결하는 방법 permalink\" class=\"heading-anchor before\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15\" height=\"15\" viewBox=\"0 0 24 24\"><path d=\"M6.188 8.719c.439-.439.926-.801 1.444-1.087 2.887-1.591 6.589-.745 8.445 2.069l-2.246 2.245c-.644-1.469-2.243-2.305-3.834-1.949-.599.134-1.168.433-1.633.898l-4.304 4.306c-1.307 1.307-1.307 3.433 0 4.74 1.307 1.307 3.433 1.307 4.74 0l1.327-1.327c1.207.479 2.501.67 3.779.575l-2.929 2.929c-2.511 2.511-6.582 2.511-9.093 0s-2.511-6.582 0-9.093l4.304-4.306zm6.836-6.836l-2.929 2.929c1.277-.096 2.572.096 3.779.574l1.326-1.326c1.307-1.307 3.433-1.307 4.74 0 1.307 1.307 1.307 3.433 0 4.74l-4.305 4.305c-1.311 1.311-3.44 1.3-4.74 0-.303-.303-.564-.68-.727-1.051l-2.246 2.245c.236.358.481.667.796.982.812.812 1.846 1.417 3.036 1.704 1.542.371 3.194.166 4.613-.617.518-.286 1.005-.648 1.444-1.087l4.304-4.305c2.512-2.511 2.512-6.582.001-9.093-2.511-2.51-6.581-2.51-9.092 0z\"/></svg></a>세마포가 busy wait를 해결하는 방법</h2>\n<hr>\n<p>아래 두가지 함수를 통해서 세마포는 <strong>busy wait</strong>를 해결합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token function\">wait</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">S</span><span class=\"token operator\">--</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token class-name\">S</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        add <span class=\"token keyword\">this</span> process <span class=\"token keyword\">to</span> <span class=\"token class-name\">Queue</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">sleep</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token function\">signal</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">S</span><span class=\"token operator\">++</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token class-name\">S</span> <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        remove a process p from <span class=\"token class-name\">Queue</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">wakeup</span><span class=\"token punctuation\">(</span>p<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>        \n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 방식은 이전처럼 while문을 통한 접근 가능여부를 체크하는 것이 아닌 만약 접근 불가능 한경우(사용가능한 공유 자원이 없을떄)\n해당 프로세스의 <strong>PCB</strong>를 <strong>세마포</strong>를 위한 <strong>대기 큐</strong>에 넣습니다.</p>\n<p>프로세스는 대기 큐에 들어가게 되면서 이후 해당 <strong>PCB</strong>를 <strong>준비 큐</strong>로 돌리기 전까지 <strong>CPU</strong>자원을 잡아 먹지 않게 됩니다.</p>","frontmatter":{"title":"상호배제와 동기화 기법","date":"September 20, 2025","update":"September 20, 2025","tags":["운영체제"],"series":"프로세스 동기화"},"fields":{"slug":"/18/","readingTime":{"minutes":8.875}}},"seriesList":{"edges":[{"node":{"id":"da3c5e49-4e7a-5a73-9721-63c6fcfb309a","fields":{"slug":"/16/"},"frontmatter":{"title":"병행성과 병렬성의 차이 및 프로세스 동기화의 필요성"}}},{"node":{"id":"9c3f7bc5-90c4-5e47-9f48-10bca7854de7","fields":{"slug":"/18/"},"frontmatter":{"title":"상호배제와 동기화 기법"}}},{"node":{"id":"f39d8dc9-6cc3-58ef-bc92-30aa7f01bd6b","fields":{"slug":"/17/"},"frontmatter":{"title":"임계구역과 경쟁상태"}}}]},"previous":{"fields":{"slug":"/16/"},"frontmatter":{"title":"병행성과 병렬성의 차이 및 프로세스 동기화의 필요성"}},"next":{"fields":{"slug":"/17/"},"frontmatter":{"title":"임계구역과 경쟁상태"}}},"pageContext":{"id":"9c3f7bc5-90c4-5e47-9f48-10bca7854de7","series":"프로세스 동기화","previousPostId":"da3c5e49-4e7a-5a73-9721-63c6fcfb309a","nextPostId":"f39d8dc9-6cc3-58ef-bc92-30aa7f01bd6b"}},"staticQueryHashes":[],"slicesMap":{}}