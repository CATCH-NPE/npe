{"componentChunkName":"component---src-templates-post-jsx","path":"/hs2/","result":{"data":{"site":{"siteMetadata":{"title":"CATCH NPE"}},"markdownRemark":{"id":"a19bc92c-cb8c-5cf6-a09a-30349b5f21dc","excerpt":"앞서, 운영체제란 무엇인지 그리고 커널에 대해 간단하게 알아봤다.\n이제 커널이 어떻게 작동하는지 제대로 알아보자. 먼저 인터럽트(Interrupt)에 대해 알아야 한다.  컴퓨터는 위 사진처럼 주변 입출력 기기와 서로 통신하는데\n이 과정에서 서로 입출력 요청이 오가는데 이때 입출력 메커니즘들이 발생된다.\n이중 하나가 인터럽트이다. \n인터럽트는 중단시키다라…","html":"<p>앞서, 운영체제란 무엇인지 그리고 커널에 대해 간단하게 알아봤다.\n이제 커널이 어떻게 작동하는지 제대로 알아보자.</p>\n<p>먼저 인터럽트(Interrupt)에 대해 알아야 한다.</p>\n<p><figure class='gatsby-resp-image-figure' style='margin-bottom: 16px;'>\n    <span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 431px; '>\n      <a class='gatsby-resp-image-link' href='/static/f95d40cd5c4355157dc98470083e6eac/7921f/img_3.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 76.47058823529412%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAACjklEQVR42m1TaXPaQAz1//8tnXbamdIPTZsecQjhCOYwNsaAbcxlk4A5kwCvesrAJG01I1hrd6Wn97QGxHzfx2QyQRAEiKLo7P1+H9PpFKPRSNeDwUB9OByi1WrpHdrxeMTJDH7EcYz7+3u9NJvNkCSJftM3mw3CMMR8Psd4PNa91WqlMX7T9vs9DoeDusEAExJFp+Prmk4URPn4+KgdcN3tdrVoGIQaS9MUz8/Pep4FHh4eXhDy8Hq9kaRDNBp38h3AvP6B5XKlCMIwwE3hF9IkhWWVhYaJdvLflvnDhC+Q94LC1vYm05HGPa+DJE0wTcZYZkt0ew6OOGCxWPyTkP8GYVcqFZRKJfEicl/ewzRNFAoFXP74jo+f3iGfz6ub5jU+5z6gVC7qfrvdxm63w2szqBY5CIQX8lC1iqJkjF6vh1rNQv7mCrbd0j363V1JleZ58u773bcJeWi73SKM+gjCnqx3yLJMCfY6HqrVsqq5XC7Vt5st/K4rosUv9+Q+Wz25Ydu28JGJwg7cdlNGYq3qkaMkmYgIJUk4UT4Zz4RHnptOx8p1R4q+5tFoNBrKAytFYYRypaAq0p6ennTmSEmazmC3auj1fU2aiOIcesuydDa5ZidGvV7Xy0HQl2odaccTjiLU643zC/I8Tzn1fU+LZdIRO+DoEBCLkia64bouFvOFkP9TSV6v11qRg316dre3tygWixIb6ctpt1uKlkhZ9I0oPMjpbzTrZ0Qkn8ZXwnaJgoVJC/cd14HjtLQjx3HOHKoo5XJZgxffcqJoFc2mLeNS0ySVSglfL3K6JlccI45QPm/i99Wl3HPPCM+i8IWwvdEoVk5eO2e0VrcwiAY6Rqd4Ki8njiNV+W/7Azk3VL/ZkAN8AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img_3.png' title='' src='/static/f95d40cd5c4355157dc98470083e6eac/7921f/img_3.png' srcset='/static/f95d40cd5c4355157dc98470083e6eac/e7570/img_3.png 170w,\n/static/f95d40cd5c4355157dc98470083e6eac/f46e7/img_3.png 340w,\n/static/f95d40cd5c4355157dc98470083e6eac/7921f/img_3.png 431w' sizes='(max-width: 431px) 100vw, 431px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n    <figcaption class='gatsby-resp-image-figcaption'>img_3.png</figcaption>\n  </figure></p>\n<p>컴퓨터는 위 사진처럼 주변 입출력 기기와 서로 통신하는데\n이 과정에서 서로 입출력 요청이 오가는데 이때 입출력 메커니즘들이 발생된다.\n이중 하나가 인터럽트이다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 657px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/61f625e446355f48a42a5d423fc97597/1475c/img.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 11.176470588235293%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAATklEQVR42mNwc/f8n5df8N8/IOh/YmLy/6jo2P+SUjL/ZeUUwFhOXpEkzKChqf3f2cXtv4mp+X87O4f/1jZ2/3X1DP4bm5j919c3JNlQAJn9PAdfS1P/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img' title='' src='/static/61f625e446355f48a42a5d423fc97597/1475c/img.png' srcset='/static/61f625e446355f48a42a5d423fc97597/e7570/img.png 170w,\n/static/61f625e446355f48a42a5d423fc97597/f46e7/img.png 340w,\n/static/61f625e446355f48a42a5d423fc97597/1475c/img.png 657w' sizes='(max-width: 657px) 100vw, 657px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n인터럽트는 중단시키다라는 의미로 초인종과 같다고 할 수 있다.\n즉, 인터럽트가 발생하면 잠깐 멈추고 다시 실행된다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 372px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/1a630d318cb1fe19075afd79242ae35b/448ef/img_1.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 52.94117647058824%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB3UlEQVR42nVTXXOjMAzM//9pN5M8NPdw+WhIAySBQgFjAwab7cqkbW5uTjMaI8laa9dmVRQFvPdQSmGeZ4hJLN9f/v/Ywz/lxVZt20Jrjc1mg+h0wjiO0MbA+WXz5Bz6vl+a2DBOE0zXheaOecv9kveP+koKwzAgSRLElwuqRuHwofGmJ1yMw1s74qXQ+KMk9oiUxb7USAdgVxqc1YBX5s/aQU8zVnKyAMZxHEDFq6oChII4J32tNE5mClMJA0MGYUJOuiHoffCM5rA9TCiUoijCfr/HibR1q0jhh7I0+odG00TA7gfQDBZL5aGh6DdRl7Isv9NJ3cI6v8SzQ6F7VNajHme8mxG5WgBV16MwFg3zH5zSelI+Ho9Q1O12u0FuvKlrvOQNTtSwI2ZBoN/Ur2BDIYDdiF9ZC+VA7RwiejV65KwPAuhISTTM8xxZluGda9XUyDqLnM03TlSYnqMS3U3w44B7rZDzoFR1sNZSZ6JTChFxVXMieYNCPTgFT9MULUG1alDmGZL4wulLKD4xWbP7PdTSJMb1ekXdNKiII08oXMqzyQ3udrtAXyzLcqzX63CY2J1g+8OBscF2u8X5fP6r/x9AkUBARYavv0ZozX65JMlLXfbJE5L1+U/5BNw3UlWifQkoAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img 1' title='' src='/static/1a630d318cb1fe19075afd79242ae35b/448ef/img_1.png' srcset='/static/1a630d318cb1fe19075afd79242ae35b/e7570/img_1.png 170w,\n/static/1a630d318cb1fe19075afd79242ae35b/f46e7/img_1.png 340w,\n/static/1a630d318cb1fe19075afd79242ae35b/448ef/img_1.png 372w' sizes='(max-width: 372px) 100vw, 372px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>실제 발생하는 대부분의 인터럽트는 I/O 인터럽트이다.\n예를들면, 우리가 자바에서 print을 할 때 print라는 API를 파일이라는 인터페이스를 통해서 유저모드에서 커널 모드로 시스템 콜이 발생한다.\n유저모드 API에서 커널모드 구성요소에서 시스템 콜이 이어지고 디바이스 드라이버를 제어하기 시작하는데\n<a href=\"https://en.wikipedia.org/wiki/Interrupt_request#:~:text=In%20a%20computer,or%20mouse%20movements.\">이때 디바이스 드라이버가 인터럽트를 CPU에 요청한다. 이 행위를 IRQ라고 한다.</a>\n이러한 IRQ는 장치마다 다른 번호로 관리하게 된다.\n아무튼 출력기기에 출력이 되면, 다시 역순으로 디바이스(하드웨어)에서 디바이스 드라이버로,\n디바이스 드라이버에서 커널 모드로 해서 최종적으로 유저 모드로 다시 돌아오게 된다.</p>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/5ad9fd0cefdd153390ee5a6d0acfa4f9/a91f8/img_4.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 47.05882352941176%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABnUlEQVR42l2Sy0/CQBDG++/jhYSDGhOvJoQYiI9IjCdPxsdRjUGUvhBoS5/Qdnfbz5kFBJlkspPdmd98M60Bsqos8dVqYXBwgGGziUGjoX10dIRaCGyslBVO7z5w3H/Dye27Pg9vXnF2/wmpap1jaCAVOefncDodjLtd7Xa7DbfXQyXlFigUrp9GuHwycfFo4urZRPfhG/0XC0pVK2BVVVgul6jrGhkp9cIQfhQhpSaK3sSOQo4rpaBEAZFnkMUCtRSo1wxmGYoSFosFAs9DmiSITBPxaISEoLPp9B9QihJDZwp3MoPrjjH+mSAIQnievwWSNAhSNp/Pkec5AlIYETgvCoQUy52RFamxJz6SNEMcR4ioaUm1Oo9OZhk5qYvjGGmW6QQGB0GgnWMu+NthWcCfRwjont9839ewkOoSYuSk0lA0EkP5ISOobdvaE1LJBf93WMKdEiSKYdJqXNdFlqar6QimaJrVyDQeK+RdWpalnWNusP9R4iTVzRjoOI7eHefJ9ST6t+EvzAtl44SCGmzu+NzY7h035HXs5/0CfzWpjbds3BAAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img 4' title='' src='/static/5ad9fd0cefdd153390ee5a6d0acfa4f9/ca1dc/img_4.png' srcset='/static/5ad9fd0cefdd153390ee5a6d0acfa4f9/e7570/img_4.png 170w,\n/static/5ad9fd0cefdd153390ee5a6d0acfa4f9/f46e7/img_4.png 340w,\n/static/5ad9fd0cefdd153390ee5a6d0acfa4f9/ca1dc/img_4.png 680w,\n/static/5ad9fd0cefdd153390ee5a6d0acfa4f9/a91f8/img_4.png 960w' sizes='(max-width: 680px) 100vw, 680px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span>\n이때, 이러한 행위 도중 wait을 걸면 블라킹(동기) 안걸면 논블라킹(비동기)으로 동작하게 된다.</p>\n<p>인터럽트에는 우선순위가 있고 외부 인터럽트인지 내부 인터럽트인지에 따라 우선순위가 달라진다.</p>\n<p>먼저, 외부 인터럽트로 내부 인터럽트보다 우선 시 된다.</p>\n<p>그 중에서도 우선 순위가 있는데, 다음과 같다.</p>\n<ul>\n<li>전원 이상 인터럽트: 말 그대로 정전 또는 파워 이상</li>\n<li>기계 착오 인터럽트: CPU의 기능적인 오류.</li>\n<li>외부 신호 인터럽트: 타이머 또는, 키보드 인터럽트 키(Ctrl + Alt + Delete). 외부장치로부터 인터럽트 요청이 있는 경우. I/O 인터럽트와 다른 개념이다.</li>\n<li>입출력 인터럽트: 입출력 장치가 데이터 전송을 요구하거나 전송이 끝나 다음 동작이 수행되어야 할 경우. 입출력 데이터에 이상이 있는 경우. 우리가 자주 다루게 될 인터럽트 부분이다.</li>\n</ul>\n<p>이제 내부 인터럽트인데, 사실 우리가 주로 다루게 될 것은 외부 인터럽트에 있어 내부 인터럽트는 뭐가 있는지만 대강 본다.</p>\n<ul>\n<li>명령어 잘못 인터럽트: 잘못된 명령어나 잘못된 데이터를 사용할 때 발생하며 Trap이라 부른다,</li>\n<li>프로그램 검사</li>\n<li>소프트웨어 인터럽트(=SVC, SuperVisor Call)</li>\n</ul>\n<p>인터럽트 동작 순서에 대해 다시 살펴보면 다음과 같은데,</p>\n<ol>\n<li>인터럽트 요청</li>\n<li>프로그램 실행 중단</li>\n<li>현재 프로그램 상태 보존 -> PCB(Process Control Block), PC(Program Counter) 등</li>\n<li>인터럽트 서비스 루틴 실행: 인터럽트 처리 코드</li>\n<li>상태  복구</li>\n<li>중단 프로그램 실행 재개</li>\n</ol>\n<p><span class='gatsby-resp-image-wrapper' style='position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 307px; margin-bottom: 16px;'>\n      <a class='gatsby-resp-image-link' href='/static/0c0c26d4cb27ec122a387afdfb39ca8f/ca17f/img_2.png' style='display: block' target='_blank' rel='noopener'>\n    <span class='gatsby-resp-image-background-image' style=\"padding-bottom: 78.23529411764706%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsTAAALEwEAmpwYAAACTUlEQVR42qWUW5OaQBCF/f9/I295yEuSqq11t7LxLoogKqgooomilK6KIuLtpHsEZbdqH5J0VeOMM/NxTvdo6nQ6IfB32O0C+PTpb33sovn5fAbH5XK5JUe4D8WegPbEud/vxVpqtfYgqw1IDQPflQ7qTQMVmiuajsPhgGTEQMse0ZkmVDrDWavraHf7d6BCEMkw8bneQ6NtokbzYkWG4ziYTCawbRuWZWE4HMJ1XbSMDmR6odJqi6xqLbTNCLhcrfEzm8dLQcK3XAWZbAG5cgWP6WeyvROqlsslptOpUHy5nNEnhaWqgvTTDzw8plEoV9HpDyLgeo1soQyJNlRkRSyyulxJEmrcmQtnclXK6dH+pt6Gqnfo5UU8Pb9AJZVGbHlJlllyUZKRKZRQllVU603I9cathlHpROyDAFpTR62hk+2mqLdM45vlI3X593iMiTOBaZoYDAYYjX4Jm8kuc6xWK/F9z7KFCFbGKSdryI/NZoMwDLHdbkX6vi8Wk8DFYiGAcZfZBTfzqvQdkN/KED7EQK5brGpNNeMOB2Q1Dmt4BWpGV+Qby/yYzWZC5WLxig0BZ9OZWOQuc2NYfdJ6b2CjojRE4zL5EiRFg97t3YFshYvted7NMo/n8/kNkvyljKnrRseEWtdQU1QYdHdtqvsdSLZe1xv0Vnu43hY2WWLFH0US/n4ugMfjEfmxhy8dF+kRwTdRU5L35UP427kAekGIFyfAp2oPX60lHD+6f/j7SEUVwtALkHND6Isd+B/oXyMVDw7HkwCFZP9/4g/m37cx2ey4VAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class='gatsby-resp-image-image' alt='img 2' title='' src='/static/0c0c26d4cb27ec122a387afdfb39ca8f/ca17f/img_2.png' srcset='/static/0c0c26d4cb27ec122a387afdfb39ca8f/e7570/img_2.png 170w,\n/static/0c0c26d4cb27ec122a387afdfb39ca8f/ca17f/img_2.png 307w' sizes='(max-width: 307px) 100vw, 307px' style='width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;' loading='lazy' decoding='async'>\n  </a>\n    </span></p>\n<p>이 과정에서 유저모드에서 커널모드로 넘어갈 떄 컨텍스트 스위칭이 되면서 오버헤드가 발생하는데 이로 인해 시스템 상 지연이 발생한다.\n하지만 고성능 어플리케이션을 할 때 이 지연은 꽤나 치명적일 것이다.\n그래서 위와 같이 DMA(Direct Memory Access)라는 기술을 사용하게 됐다.\n예를들어, DirectX라는 것이 있는데 이는 게임을 할 때 이러한 컨텍스트 스위칭 되는 부분을 건너뛰어 직접 드라이버까지 가는 방식이 있다.\n이렇듯 DirectX처럼 인터럽트 시 컨텍스트 스위칭으로 인한 오버헤드가 발생하면서 지연이 발생하는데 이걸 해소하는 것이 DMA인 것이다.\n정리하자면, <a href=\"https://en.wikipedia.org/wiki/Direct_memory_access#:~:text=DMA%20(%20Direct%20Memory%20Access%20)%EB%8A%94%20%ED%8A%B9%EC%A0%95%20%ED%95%98%EB%93%9C%EC%9B%A8%EC%96%B4%20%ED%95%98%EC%9C%84%20%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%9D%B4%20%EC%A4%91%EC%95%99%20%EC%B2%98%EB%A6%AC%20%EC%9E%A5%EC%B9%98%20(CPU)%20%EC%99%80%20%EB%8F%85%EB%A6%BD%EC%A0%81%EC%9C%BC%EB%A1%9C%20%EC%A3%BC%20%EC%8B%9C%EC%8A%A4%ED%85%9C%20%EB%A9%94%EB%AA%A8%EB%A6%AC%20%EC%97%90%20%EC%95%A1%EC%84%B8%EC%8A%A4%ED%95%A0%20%EC%88%98%20%EC%9E%88%EB%8F%84%EB%A1%9D%20%ED%95%98%EB%8A%94%20%EC%BB%B4%ED%93%A8%ED%84%B0%20%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%9D%98%20%EA%B8%B0%EB%8A%A5%EC%9E%85%EB%8B%88%EB%8B%A4%20.\">DMA는 RAM에 일정 부분을 예약해 불필요한 컨텍스트 스위칭을 스킵해 오버헤드 방지 및 지연을 획기적으로 줄이는 방식이다.</a></p>","frontmatter":{"title":"2. 커널의 작동 방식","date":"September 04, 2025","update":"September 04, 2025","tags":["운영체제"],"series":"운영체제"},"fields":{"slug":"/hs2/","readingTime":{"minutes":5.85}}},"seriesList":{"edges":[{"node":{"id":"8b51f460-43e0-561e-ab49-84bc59be430a","fields":{"slug":"/hs1/"},"frontmatter":{"title":"1. 운영체제의 개념과 구조"}}},{"node":{"id":"a19bc92c-cb8c-5cf6-a09a-30349b5f21dc","fields":{"slug":"/hs2/"},"frontmatter":{"title":"2. 커널의 작동 방식"}}},{"node":{"id":"3ad80296-57ed-53b0-ada7-f06096fe6849","fields":{"slug":"/hs4/"},"frontmatter":{"title":"4. 쓰레드 "}}},{"node":{"id":"46425f46-05a1-5269-ad13-c4687acafbf1","fields":{"slug":"/hs3/"},"frontmatter":{"title":"3. 프로세스"}}},{"node":{"id":"cb8ba341-aac3-5491-9121-5bee87c5172c","fields":{"slug":"/hs5/"},"frontmatter":{"title":"5. CPU 스케줄링"}}}]},"previous":{"fields":{"slug":"/hs1/"},"frontmatter":{"title":"1. 운영체제의 개념과 구조"}},"next":{"fields":{"slug":"/jc1/"},"frontmatter":{"title":"운영체제의 역할과 커널의 기능"}}},"pageContext":{"id":"a19bc92c-cb8c-5cf6-a09a-30349b5f21dc","series":"운영체제","previousPostId":"8b51f460-43e0-561e-ab49-84bc59be430a","nextPostId":"a856e34f-f9a9-5164-8fb5-befe1aa43bcd"}},"staticQueryHashes":[],"slicesMap":{}}